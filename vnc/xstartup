#!/bin/sh

# VNC xstartup script for i3 window manager
# This script is executed when VNC server starts

# Source system-wide X session scripts
if [ -r /etc/X11/xinit/xinitrc ]; then
    . /etc/X11/xinit/xinitrc
fi

# Source user X session scripts
if [ -r ~/.xinitrc ]; then
    . ~/.xinitrc
fi

# Set up environment
export XKL_XMODMAP_DISABLE=1
export XDG_CURRENT_DESKTOP=i3
export XDG_SESSION_DESKTOP=i3

# Start dbus session if not running
if [ -z "$DBUS_SESSION_BUS_ADDRESS" ]; then
    eval $(dbus-launch --sh-syntax --exit-with-session)
fi

# Start compositor 
picom -b &

# Start i3 window manager
exec i3
